<!DOCTYPE html>
<html>
<head>
    <title>Student Dashboard</title>
    <style>
        body { 
            font-family: Arial; 
            margin: 0; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .header { 
            background: white;
            padding: 20px;
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .logo { font-size: 24px; }
        .content { padding: 20px; }
        .form-section { 
            background: white;
            margin: 20px 0; 
            padding: 20px; 
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        input, select, button { 
            padding: 10px; 
            margin: 5px; 
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button { 
            background: #667eea; 
            color: white; 
            border: none;
            cursor: pointer;
        }
        button:hover { background: #5a6fd8; }
        .logout { 
            background: #e74c3c; 
            color: white; 
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div><span class="logo">ðŸŽ“</span> Student Dashboard</div>
        <a href="/logout" class="logout">Logout</a>
    </div>
    
    <div class="content">
        <div class="form-section">
            <h2>Report Lost/Found Item</h2>
            <form id="reportForm">
                <input type="text" name="name" placeholder="Item Name" required/>
                <input type="text" name="description" placeholder="Description" required/>
                <input type="text" name="location" placeholder="Location" required/>
                <input type="date" name="date" required/>
                <input type="text" name="contact" placeholder="Your Contact" required/>
                <select name="status" required>
                    <option value="">Select Status</option>
                    <option value="Lost">Lost Item</option>
                    <option value="Found">Found Item</option>
                </select>
                <button type="submit">Report Item</button>
            </form>
        </div>
        
        <div class="form-section">
            <h2>Search Items</h2>
            <input type="text" id="searchInput" placeholder="Search by name or description..."/>
            <button onclick="searchItems()">Search</button>
        </div>
        
        <div class="form-section">
            <h2>All Items</h2>
            <div id="itemsList"></div>
        </div>
    </div>
    
    <script>
        document.getElementById('reportForm').onsubmit = async function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());
            const response = await fetch('/api/items', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            if (response.ok) {
                alert('Item Reported Successfully!');
                e.target.reset();
                loadItems();
            } else {
                alert('Error reporting item');
            }
        };
        
        async function loadItems() {
            const response = await fetch('/api/items');
            if (response.ok) {
                const items = await response.json();
                displayItems(items);
            }
        }
        
        function displayItems(items) {
            document.getElementById('itemsList').innerHTML = items.map(item => 
                `<div style="border:1px solid #ddd; padding:15px; margin:10px 0; border-radius:8px; background:#f9f9f9;">
                    <strong style="color:#667eea;">${item.name}</strong> 
                    <span style="background:${item.status === 'Found' ? '#27ae60' : '#e74c3c'}; color:white; padding:2px 8px; border-radius:12px; font-size:12px;">${item.status || 'Lost'}</span><br>
                    <strong>Description:</strong> ${item.description}<br>
                    <strong>Location:</strong> ${item.location} | <strong>Date:</strong> ${item.date}<br>
                    <strong>Contact:</strong> ${item.contact}
                </div>`
            ).join('');
        }
        
        async function searchItems() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const response = await fetch('/api/items');
            if (response.ok) {
                const items = await response.json();
                const filtered = items.filter(item => 
                    item.name.toLowerCase().includes(query) || 
                    item.description.toLowerCase().includes(query)
                );
                displayItems(filtered);
            }
        }
        
        loadItems();
    </script>
</body>
</html>